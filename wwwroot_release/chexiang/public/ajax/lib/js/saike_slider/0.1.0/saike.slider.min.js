(function(e){e.fn.slider=function(t){var a=e.extend({},e.fn.slider.defaults,t),q=a.showSize,h=a.curPage;return this.each(function(){function u(){e('<div class="arrow-slider-left" id="J_imgLeft">left</div><div class="arrow-slider-right" id="J_imgRight">right</div>').appendTo(c);var f=c.find(".arrow-slider-left"),m=c.find(".arrow-slider-right"),v=parseInt((k.height()-f.height())/2);f.css({top:v,left:f.width()/3});m.css({top:v,right:f.width()/3});f.bind("mouseover",function(){e(this).addClass("arrow-slider-left-hover");clearInterval(g)}).bind("mouseout",function(){e(this).removeClass("arrow-slider-left-hover");a.auto?g=setInterval(function(){s(n)},a.interval):clearInterval(g)});m.bind("mouseover",function(){e(this).addClass("arrow-slider-right-hover");clearInterval(g)}).bind("mouseout",function(){e(this).removeClass("arrow-slider-right-hover");a.auto?g=setInterval(function(){s(n)},a.interval):clearInterval(g)});f.click(function(){if(!b.is(":animated")&&(b.find("li").slice(l-a.offsetSize,l).insertBefore(b.find("li:first")),b.css({left:"-="+k.outerWidth(!0)*a.offsetSize}),b.animate({left:"+="+k.outerWidth(!0)*a.offsetSize},a.speed,function(){b.css({left:0})}),0<c.find(".slider-current-page").size())){d=c.find(".slider-current-page");1==parseInt(d.text())?(h=Math.ceil(p/q),d.text(h--)):d.text(parseInt(d.text())-1);h=d.text();var f=c.find("ul:last").find("li");f.removeClass("active-marker");e(f.eq(d.text()-1)).addClass("active-marker")}});m.click(function(){if(!b.is(":animated")&&(b.animate({left:"-="+k.outerWidth(!0)* a.offsetSize},a.speed,function(){b.css({left:0}).find("li:lt("+a.offsetSize+")").appendTo(b)}),0<c.find(".slider-current-page").size())){d=c.find(".slider-current-page");parseInt(d.text())==Math.ceil(p/q)?(h=0,d.text(++h)):d.text(1+parseInt(d.text()));h=d.text();var f=c.find("ul:last").find("li");f.removeClass("active-marker");e(f.eq(d.text()-1)).addClass("active-marker")}})}function s(f){var m=f.find("ul:first");"left"==a.direction?(m.animate({left:"-="+k.outerWidth(!0)*a.offsetSize},a.speed,function(){m.css({left:0}).find("li:lt("+a.offsetSize+")").appendTo(m)}),h==Math.ceil(p/q)&&(h=0),0<c.find(".slider-current-page").size()&&c.find(".slider-current-page").text(++h)):(b.find("li").slice(l-a.offsetSize,l).insertBefore(b.find("li:first")),b.css({left:"-="+k.outerWidth(!0)*a.offsetSize}),b.animate({left:"+="+k.outerWidth(!0)*a.offsetSize},a.speed,function(){b.css({left:0})}),0<c.find(".slider-current-page").size()&&(d=c.find(".slider-current-page"),1==d.text()&&(h=Math.ceil(p/q)),d.text(h--)));f=c.find("ul:last").find("li");f.removeClass("active-marker");e(f.eq(h-1)).addClass("active-marker")}var g,c=e(this),n=c.find(".arrow-slider"),k=c.find("li"),b=c.find("ul:first"),l=b.find("li").size(),r=l%a.offsetSize,t=a.offsetSize-r;(0!=r||l<a.showSize)&&b.find("li:lt("+t+")").clone().appendTo(b);a.offsetSize>l&&e('<div class="slider-error-tips">请查看相关API</div>').appendTo(c);var p=b.find("li").size();1>=p&&(a.auto=!1);r=(k.width()+a.itemPadding)*q-a.itemPadding;b.find("li").css({"padding-right":a.itemPadding}).each(function(a,b){e(b).attr("data-item","item"+a)});b.find("li:first").addClass("cur");b.width((k.width()+a.itemPadding)*p).height(k.height());n.height(k.height()).width(r);c.width(r);c.addClass("slider-"+a.type);var d;a.offsetSize==a.showSize&&1==a.showSize&&a.showType&&(e('<div class="slider-total"><span class="slider-current-page">'+h+'</span>/<span class="slider-items">'+l+"</span></div>").appendTo(c),a.showAmount?e(".slider-total").css({display:"display"}):e(".slider-total").css({display:"none"}),function(){e.each(b.find("li"),function(b,c){var d=e(c).find("img").attr("alt");d&&a.alt&&(d=e('<div class="slider-tips">'+d+"</div>"),d.appendTo(e(c)))})}(),function(){var d=[];d.push('<ul class="slider-markers">');for(var m=0;m<l;m++)d.push("<li>"+(m+1)+"</li>");d.push("</ul>");c.append(d.join(""));e(c.find(".slider-markers li").eq(a.curPage-1)).addClass("active-marker");c.find(".slider-markers").delegate("li","mouseover",function(){clearInterval(g)});c.find(".slider-markers").delegate("li","click",function(){var d=e(this).index();if(!b.is(":animated")&&"undefind"!=d){var f=b.find("li[data-item$="+d+"]").index(),g=parseInt(b.find("li").eq(0).data("item").match(/\d+/)[0]);if(d===g)return;d>g?b.stop().animate({left:"-="+k.outerWidth(!0)*f},a.speed,function(){b.css({left:0}).find("li").slice(0,f).appendTo(b);b.find("li").removeClass("cur");b.find("li:first").addClass("cur")}):(g=b.find("li").slice(f,l),g.prependTo(b),b.css({left:"-="+k.outerWidth(!0)*g.length}),b.stop().animate({left:0},a.speed,function(){b.find("li").removeClass("cur");b.find("li:first").addClass("cur")}))}e(this).siblings().removeClass("active-marker").end().addClass("active-marker");c.find(".slider-current-page").text(d+1);h=parseInt(c.find(".slider-current-page").text())});c.find(".slider-markers").delegate("li","mouseout",function(){a.auto?g=setInterval(function(){s(n)},a.interval):clearInterval(g)})}());b.animate({left:"-="+k.outerWidth(!0)*a.offsetSize*(a.curPage-1)},0,function(){b.css({left:0}).find("li:lt("+a.offsetSize*(a.curPage-1)+")").appendTo(b)});n.hover(function(){clearInterval(g)},function(){a.auto?g=setInterval(function(){s(n)},a.interval):clearInterval(g)});if(a.showArrow){if(u(),l==a.offsetSize||l==a.showSize)a.auto=!1,c.find(".arrow-slider-left").unbind("click").unbind("mouseover"),c.find(".arrow-slider-right").unbind("click").unbind("mouseover")}else{if(a.noArrow)return;c.hover(function(){0==e(".arrow-slider-left").length&&u()},function(){e(".arrow-slider-left").remove();e(".arrow-slider-right").remove()})}a.auto&&n.trigger("mouseleave")})};e.fn.slider.defaults={offsetSize:1,showSize:1,itemPadding:0,auto:!0,curPage:1,showArrow:!0,noArrow:!1,speed:600,interval:5E3,direction:"left",alt:!1,type:"rectangle",showAmount:!1,showType:!0}})(jQuery);