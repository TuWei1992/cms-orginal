(function(d,c,a){var b;b={config:{docSrlBar:false},init:function(){var e;e=d("body");this._effect.caps();this._effect.mouseOffset();if(this.config.docSrlBar){this._set.docScrollBar()}this._set.topAd();this._set.mixture();this._set.slider();this._set.tab();this._set.caption();this._set.imgLazyLoad();this._set.imgOffset();this._set.monitor(e);this._set.im.init();this._set.slt();this._set.sltOptSrl();this._set._form.init()},helpers:{pdControl:function(f){f.stopPropagation();f.preventDefault()},clickOrTouch:function(f){return Modernizr.touch?"touchstart":"click"},getQueryString:function(e){return e.substring(e.indexOf("?")+1)},Arg:function(f,e){var j,l,h,k;j=this.getQueryString(e).split("&");for(var g=0;g<j.length;g++){l=j[g].indexOf("=");if(l==-1){continue}h=j[g].substring(0,l);k=j[g].substring(l+1);if(h==f){return unescape(k.replace(/\+/g," "))}}}},_effect:{caps:function(){d.fn.showCap=function(f,e){var g;g=this;g.on("mouseover",function(){var h;h=d(this).find(".gallery-banner");h.stop().animate({height:f},100)}).on("mouseleave",function(){var h;h=d(this).find(".gallery-banner");h.stop().animate({height:e},100)})}},mouseOffset:function(){d.fn.imgOffset=function(e){var i=this,g=e.sensitiveness,f=e.picSelector,h=e.unnatual||false;i.each(function(r,s){var q=d(s),k=q.find(f),l=q.innerWidth(),j=k.innerWidth(),o=(g*(j-l))/l,n={leftMost:l-j,rightMost:0},m={pageX:null,pageY:null,leftDst:null};q.on("mouseenter",function(t){m.pageX=t.pageX;m.pageY=t.pageY;m.leftDst=parseFloat(k.css("left"))});q.on("mousemove",function(w){var v={pageX:w.pageX,pageY:w.pageY},t=v.pageX-m.pageX;if(h){t*=-1}var u=m.leftDst+t*o;m.pageX=v.pageX;m.pageY=v.pageY;if(p(n,u,t,h)){return}k.css("left",m.leftDst=u)});function p(v,u,t){return(t>0&&u>v.rightMost)||(t<0&&u<v.leftMost)}q.on("mouseleave",d.noop)})}}},_set:{docScrollBar:function(){var e;e=d(":root");e.niceScroll({cursorcolor:"#999",cursoropacitymin:0,cursoropacitymax:1,cursorwidth:12,cursorborder:"0 solid #fff",cursorborderradius:0,zindex:9999,scrollspeed:60,mousescrollstep:40,touchbehavior:false,hwacceleration:true,boxzoom:false,dblclickzoom:false,gesturezoom:false,grabcursorenabled:false,autohidemode:true,background:"",iframeautoresize:true,cursorminheight:20,preservenativescrolling:true,railoffset:{top:0,left:-5},bouncescroll:true,spacebarenabled:true,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:true,horizrailenabled:false,railalign:"right",railvalign:"bottom",enabletranslate3d:true,enablemousewheel:true,enablekeyboard:true,smoothscroll:true,sensitiverail:true,enablemouselockapi:true,cursorfixedheight:false,hidecursordelay:400,directionlockdeadzone:6,nativeparentscrolling:true,enablescrollonselection:true,rtlmode:false,cursordragontouch:true,oneaxismousemode:"auto",scriptpath:""})},topAd:function(){var f,e,k,j,h,i,g,l;f=d("#topbanner");e=d("#adbanner");k=d(".bannerclose",f);j=d("#doubleEightAd");h=d("#holidayAdbanner");i=e.length>0?true:false;setTimeout(function(){j.load(d.trim(j.data("source")),function(){if(e.length===0||(e.length>0&&f.data("slideup")===true)){j.find("img").on("load",function(){j.slideDown(300)})}else{j.hide()}})},0);g=function(){f.animate({height:0},{duration:1000,done:function(){f.hide();f.data("slideup",true);if(d("#holidayAdbanner").length>0){j.slideDown(500)}}})};l=function(){setTimeout(function(){if(f.is(":visible")&&!f.is(":animated")){g()}k.off()},3000)};if(i){f.slideDown({duration:1000,always:l()});k.one("click",function(){g()})}else{if(h.length>0){j.show()}}},mixture:function(){var e;e=d(".col-grid-cars").find("img");d.ajaxSetup({cache:false});d('a[href^="#"]').on("click",function(h){var g;g=this.hash;if(!g==""){h.preventDefault();var f;f=d(g);d("html, body").stop().animate({scrollTop:f.offset().top},1000,"swing",function(){c.location.hash=g})}});e.on(b.helpers.clickOrTouch(),function(){var f;f=d(this);f.next("a").get(0).click()});d("#PakageList a.btn").on("click",function(f){f.preventDefault();d.ajax({url:d(this).data("href"),cache:false,dataType:"jsonp",jsonp:"onJSONPLoad",jsonpCallback:"onJSONPLoad"})});c.onJSONPLoad=function(g){if(g.errorType=="nologin"){var f=c.location.href;c.location.href=mainBase+"/account/login.htm?backUrl="+encodeURIComponent(f)}else{if(g.errorType=="false"){a.dialog.alert(g.info)}else{a.dialog.confirm({message:'<i class="icon icon-alert-l"></i>只能兑换一次！确认兑换吗?',callback:function(){location.href=memberBase+"/member/benefits/preorderSubmit.htm?typePackage="+g.packageType}})}}}},slider:function(){var g,f,h,e;g=d("#J_arrowSlider");f=d("#banner3F");h=d(".bannerclose","#leftsideAd");e=d("#leftsideAd");g.slider({type:"rectangle"});f.slider({type:"rectangle",showArrow:false,noArrow:true});h.on("click",function(){e.hide()})},tab:function(){var e;e={};a.tab({selector:".model-contents-tabs",event:"click",delay:200,callback:function(i){if(i in e){return}e[i]=true;var h=d("#"+i),f=d("#"+i).children(".model"),g=217;if(f.length<=4){h.height(g)}else{h.height(g*2);h.css("overflow","hidden")}}})},caption:function(){var e;e=d(".show-cap");e.showCap(40,0)},imgOffset:function(){var e,f;e=d(".gallery-window");f=d(".dealerlist-pic-window");e.imgOffset({sensitiveness:3,unnatual:true,picSelector:".gallery-img"});f.imgOffset({sensitiveness:3,unnatual:true,picSelector:".dealerlist-pic"})},imgLazyLoad:function(){var e;e=d(".lazy");e.lazyload({effect:"fadeIn",threshold:200})},monitor:function(e){var g,f;g=b;f=e.find("a");f.each(function(){var j,i,h,m,o,n,p,q,r,s,k;j=d(this).attr("href");i=d(this).children("img");h=i.attr("src");m=/miaozhen/;o=/1011308/;n=/1011309/;p=/1011310/;q;r;s;k;if(m.test(j)){if(o.test(j)){var t,l;r=g.helpers.Arg("p",j);s=j.lastIndexOf("DMP-");k=j.substr(s+4,3);t="http://g.cn.miaozhen.com/x.gif?k=1011308&p="+r+"&rt=2&ns=[M_ADIP]&ni=[M_IESID]&na=[M_MAC]&v=[M_LOC]&o=http://sgm.dmp.miaozhen.com/x.gif?k=DMP-39&p=DMP-"+k+"&rt=2&o=";l=new Image();l.src=t}if(n.test(j)){var t,l;r=g.helpers.Arg("p",j);t="http://g.cn.miaozhen.com/x.gif?k=1011309&p="+r+"&rt=2&ns=[M_ADIP]&ni=[M_IESID]&na=[M_MAC]&v=[M_LOC]&o=";l=new Image();l.src=t}if(p.test(j)){var t,l;r=g.helpers.Arg("p",j);t="http://g.cn.miaozhen.com/x.gif?k=1011310&p="+r+"&rt=2&ns=[M_ADIP]&ni=[M_IESID]&na=[M_MAC]&v=[M_LOC]&o=";l=new Image();l.src=t}}})},im:{config:{scrollTop:"30px",duration:1000,easing:"swing",csim:d(".mainsite-im"),csimUrl:"http://kf1.chexiang.com/new/client.php?unique_id=&unique_name=&arg=admin&style=2&l=zh-cn&lytype=0&charset=gbk&referer=http%3A%2F%2Fwww.chexiang.com%2F&isvip=bcf14bbb85a346c2fb52e8cea8822cce&identifier=&keyword=&tfrom=1&tpl=crystal_blue",eleToTop:d(".backtoTop")},init:function(){this.jumpForwardToCS();this.scrollToTop();this.showQRCode()},jumpForwardToCS:function(){var e;e=this;this.config.csim.on("click",function(){c.open(e.config.csimUrl.replace(/.chexiang./g,"."+imBase+"."),"车享客服","height=573, width=803, top=80, left=300,toolbar=no, menubar=no, scrollbars=no, resizable=yes, location=n o, status=no")})},scrollToTop:function(){var e;e=this.config;this.config.eleToTop.on("click",function(h){var g,f;g=d(c);f=d("html, body");if(g.scrollTop()<=0){h.preventDefault();h.stopPropagation()}else{f.stop().animate({scrollTop:e.scrollTop},e.duration,e.easing)}})},showQRCode:function(){var e,f;e=d(".btnShowQRCode");f=d("body");e.on("click",function(){var i,h,j,g;i=d(this);h=i.children("div");j=i.siblings(".btnShowQRCode");g=j.children("div");g.hide();j.removeClass("highlight");i.addClass("highlight");h.show()});f.on("click.chexiang.im",function(g){if(!d(g.target).hasClass("btnShowQRCode")){e.removeClass("highlight");e.children("div").hide()}})}},slt:function(){var e;e=d("select");e.selecter({label:"车辆所在地",cover:false,callback:function(g,f){}})},sltOptSrl:function(){var e;e=d(".selecter-options");e.niceScroll({cursorcolor:"#ccc",cursoropacitymin:0,cursoropacitymax:1,cursorwidth:5,cursorborder:"0 solid #fff",cursorborderradius:0,zindex:9999,scrollspeed:60,mousescrollstep:40,touchbehavior:false,hwacceleration:true,boxzoom:false,dblclickzoom:false,gesturezoom:false,grabcursorenabled:false,autohidemode:true,background:"",iframeautoresize:true,cursorminheight:20,preservenativescrolling:true,railoffset:{top:-5,left:-5},bouncescroll:true,spacebarenabled:true,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:true,horizrailenabled:false,railalign:"right",railvalign:"bottom",enabletranslate3d:true,enablemousewheel:true,enablekeyboard:true,smoothscroll:true,sensitiverail:true,enablemouselockapi:true,cursorfixedheight:false,hidecursordelay:400,directionlockdeadzone:6,nativeparentscrolling:true,enablescrollonselection:true,rtlmode:false,cursordragontouch:true,oneaxismousemode:"auto",scriptpath:""})},_form:{init:function(){this.setFocusAssist();this.setMessage();this.setCustomMethod();this.setDefault();this._vali()},setFocusAssist:function(){var e;e=d(".f4-field");e.on("click.chexiang.form.field",function(f){if(f.target.nodeName=="DIV"){d(this).children("input").focus()}})},setMessage:function(){d.extend(d.validator.messages,{required:"必须填写",remote:"请修正此栏位",email:"请输入有效的电子邮件",url:"请输入有效的网址",date:"请输入有效的日期",dateISO:"请输入有效的日期 (YYYY-MM-DD)",number:"请输入正确的数字",digits:"只可输入数字",creditcard:"请输入有效的信用卡号码",equalTo:"你的输入不相同",extension:"请输入有效的后缀",maxlength:d.validator.format("最多 {0} 个字"),minlength:d.validator.format("最少 {0} 个字"),rangelength:d.validator.format("请输入长度为 {0} 至 {1} 之間的字串"),range:d.validator.format("请输入 {0} 至 {1} 之间的数值"),max:d.validator.format("请输入不大于 {0} 的数值"),min:d.validator.format("请输入不小于 {0} 的数值")})},setCustomMethod:function(){d.validator.addMethod("nowhitespace",function(f,e){return this.optional(e)||/^\S+$/i.test(f)},"不许存在空格。");d.validator.addMethod("phone",function(f,e){return this.optional(e)||/^0?(13[0-9]|15[012356789]|18[0-9]|14[57])[0-9]{8}$/i.test(f)},"请输入正确的手机号码。");d.validator.addMethod("notEqual",function(f,e,g){return this.optional(e)||f!==d(g).val()},"不可填写与左边相同的内容。")},setDefault:function(){d.validator.setDefaults({debug:true,onfocusin:false,onfocusout:false,onkeyup:false,focusInvalid:true,focusCleanup:false,success:function(e,f){d(f).closest(".f4-field").removeClass("_error")},errorPlacement:d.noop})},_vali:function(){var e;e=d("#frm-sell").validate({rules:{cityId:{required:true},carInfo:{required:true,maxlength:25},userName:{required:true,maxlength:10},mobilePhone:{required:true,phone:true,digits:true}},showErrors:function(g,j){var f,h,i;i=d(".error-area");if(e.numberOfInvalids()>0){f=j[0].message;h=d(j[0].element);h.closest(".f4-field").addClass("_error");f===d.validator.messages.required?i.html(d.trim(h.data("nick"))+f):h.attr("id")==="iptModel"?i.html(d.trim(h.data("nick"))+f):h.attr("id")==="iptUser"?i.html(d.trim(h.data("nick"))+f):i.html(f);i.removeClass("hide");this.defaultShowErrors()}else{i.addClass("hide")}},submitHandler:function(h,g){var f,i,j;g.preventDefault();i=d(h).find("input[type=submit]");f=function(l,k){l.removeClass("_error");l.find("input").val("");k.find("option").eq(0).attr("selected",true);k.selecter("update")};j=function(l,k){l.prop("disabled",k)};if(d("html").hasClass("ie7")||d("html").hasClass("ie8")){d(h).valid();if(e.numberOfInvalids()===0){h.submit();j(i,true);setTimeout(function(){f(d(".f4-field"),d(h).find("select"))},0);j(i,false)}else{e.focusInvalid();return false}}else{h.submit();j(i,true);setTimeout(function(){f(d(".f4-field"),d(h).find("select"))},0);j(i,false)}}})}}}};d(b.init())}(jQuery,window,window.ECar));