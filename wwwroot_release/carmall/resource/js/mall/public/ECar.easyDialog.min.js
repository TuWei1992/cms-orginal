(function(f,h,c){var e=f.document,b=e.documentElement;var g=function(){var o=e.body,k=!-[1,],n=k&&/msie 6/.test(navigator.userAgent.toLowerCase()),m=k&&/msie 7/.test(navigator.userAgent.toLowerCase()),i=1,s="cache"+(+new Date()+"").slice(-8),t={};var q=function(){};q.prototype={getOptions:function(u){var w,v={},x={container:null,overlay:true,drag:true,fixed:true,follow:null,followX:0,followY:0,autoClose:0,lock:false,success:null,callback:null};for(w in x){v[w]=u[w]!==h?u[w]:x[w]}q.data("options",v);return v},setBodyBg:function(){if(o.currentStyle.backgroundAttachment!=="fixed"){o.style.backgroundImage="url(about:blank)";o.style.backgroundAttachment="fixed"}},appendIframe:function(u){u.innerHTML='<iframe style="position:absolute;left:0;top:0;width:100%;height:100%;z-index:-1;border:0 none;filter:alpha(opacity=0)"></iframe>'},setFollow:function(z,v,u,A){v=typeof v==="string"?e.getElementById(v):v;var w=z.style;w.position="absolute";w.left=q.getOffset(v,"left")+u+"px";w.top=q.getOffset(v,"top")+A+"px"},setPosition:function(w,v){var u=w.style;u.position=n?"absolute":v?"fixed":"absolute";if(v){if(n){u.setExpression("top",'fuckIE6=document.documentElement.scrollTop+document.documentElement.clientHeight/2+"px"')}else{u.top="50%"}u.left="50%"}else{if(n){u.removeExpression("top")}u.top=b.clientHeight/2+q.getScroll("top")+"px";u.left=b.clientWidth/2+q.getScroll("left")+"px"}},createOverlay:function(){var u=e.createElement("div"),v=u.style;v.cssText="margin:0;padding:0;border:none;width:100%;height:100%;background:#333;opacity:0.6;filter:alpha(opacity=60);z-index:9999;position:fixed;top:0;left:0;";if(n){o.style.height="100%";v.position="absolute";v.setExpression("top",'fuckIE6=document.documentElement.scrollTop+"px"')}u.id="overlay";return u},createDialogBox:function(){var u=e.createElement("div");u.style.cssText="margin:0;padding:0;border:none;z-index:10000;float:left;width:auto";u.id="easyDialogBox";return u},createDialogWrap:function(z){if(z.content instanceof Object&&z.content.length>0){var x=z.content.html();z.content.remove()}else{var x=z.content}var v=z.header?'<h4 class="easyDialog_title" id="easyDialogTitle"><a href="javascript:void(0)" title="关闭窗口" class="close_btn" id="closeBtn">&times;</a>'+z.header+"</h4>":"",w=typeof z.yesFn==="function"?'<button class="btn_highlight" id="easyDialogYesBtn">'+(typeof z.yesText==="string"?z.yesText:"确定")+"</button>":"",y=typeof z.noFn==="function"||z.noFn===true?'<button class="btn_normal" id="easyDialogNoBtn">'+(typeof z.noText==="string"?z.noText:"取消")+"</button>":"",B=w===""&&y===""?"":'<div class="easyDialog_footer">'+w+y+"</div>",C=['<div class="easyDialog_content">',v,'<div class="easyDialog_text" id="easyDialog_text">'+x+"</div>",B,"</div>"].join(""),u=e.getElementById("easyDialogWrapper"),A=/<[\/]*script[\s\S]*?>/ig;if(!u){u=e.createElement("div");u.id="easyDialogWrapper";u.className="easyDialog_wrapper"}u.innerHTML=C.replace(A,"");return u}};q.data=function(v,y,x){if(typeof v==="string"){if(y!==h){t[v]=y}return t[v]}else{if(typeof v==="object"){var u=v===f?0:v.nodeType===9?1:v[s]?v[s]:(v[s]=++i),w=t[u]?t[u]:(t[u]={});if(x!==h){w[y]=x}return w[y]}}};q.removeData=function(x,y){if(typeof x==="string"){delete t[x]}else{if(typeof x==="object"){var u=x===f?0:x.nodeType===9?1:x[s];if(u===h){return}var v=function(A){var z;for(z in A){return false}return true},w=function(){delete t[u];if(u<=1){return}try{delete x[s]}catch(z){x.removeAttribute(s)}};if(y){delete t[u][y];if(v(t[u])){w()}}else{w()}}}};q.event={bind:function(y,x,w){var v=q.data(y,"e"+x)||q.data(y,"e"+x,[]);v.push(w);if(v.length===1){var u=this.eventHandler(y);q.data(y,x+"Handler",u);if(y.addEventListener){y.addEventListener(x,u,false)}else{if(y.attachEvent){y.attachEvent("on"+x,u)}}}},unbind:function(A,z,y){var w=q.data(A,"e"+z);if(!w){return}if(!y){w=h}else{for(var v=w.length-1,x=w[v];v>=0;v--){if(x===y){w.splice(v,1)}}}if(!w||!w.length){var u=q.data(A,z+"Handler");if(A.addEventListener){A.removeEventListener(z,u,false)}else{if(A.attachEvent){A.detachEvent("on"+z,u)}}q.removeData(A,z+"Handler");q.removeData(A,"e"+z)}},eventHandler:function(u){return function(z){z=q.event.fixEvent(z||f.event);var y=z.type,w=q.data(u,"e"+y);for(var v=0,x;x=w[v++];){if(x.call(u,z)===false){z.preventDefault();z.stopPropagation()}}}},fixEvent:function(w){if(w.target){return w}var v={},u;v.target=w.srcElement||document;v.preventDefault=function(){w.returnValue=false};v.stopPropagation=function(){w.cancelBubble=true};for(u in w){v[u]=w[u]}return v}};q.capitalize=function(v){var u=v.charAt(0);return u.toUpperCase()+v.replace(u,"")};q.getScroll=function(u){var v=this.capitalize(u);return b["scroll"+v]||o["scroll"+v]};q.getOffset=function(y,w){var z=this.capitalize(w),v=b["client"+z]||o["client"+z]||0,u=this.getScroll(w),x=y.getBoundingClientRect();return Math.round(x[w])+u-v};q.drag=function(B,A){var C="getSelection" in f?function(){f.getSelection().removeAllRanges()}:function(){try{e.selection.empty()}catch(G){}},F=this,u=F.event,y=false,D=k?B:e,w=A.style.position==="fixed",z=q.data("options").fixed;var E=function(J){y=true;var I=F.getScroll("top"),K=F.getScroll("left"),H=w?0:K,G=w?0:I;q.data("dragData",{x:J.clientX-F.getOffset(A,"left")+(w?K:0),y:J.clientY-F.getOffset(A,"top")+(w?I:0),el:H,et:G,er:H+b.clientWidth-A.offsetWidth,eb:G+b.clientHeight-A.offsetHeight});if(k){if(n&&z){A.style.removeExpression("top")}B.setCapture()}u.bind(D,"mousemove",v);u.bind(D,"mouseup",x);if(k){u.bind(B,"losecapture",x)}J.stopPropagation();J.preventDefault()};u.bind(B,"mousedown",E);var v=function(K){if(!y){return}C();var J=q.data("dragData"),I=K.clientX-J.x,M=K.clientY-J.y,N=J.et,O=J.er,L=J.eb,H=J.el,G=A.style;G.marginLeft=G.marginTop="0px";G.left=(I<=H?H:(I>=O?O:I))+"px";G.top=(M<=N?N:(M>=L?L:M))+"px";K.stopPropagation()};var x=function(H){y=false;if(k){u.unbind(B,"losecapture",arguments.callee)}u.unbind(D,"mousemove",v);u.unbind(D,"mouseup",arguments.callee);if(k){B.releaseCapture();if(n&&z){var G=parseInt(A.style.top)-F.getScroll("top");A.style.setExpression("top","fuckIE6=document.documentElement.scrollTop+"+G+'+"px"')}}H.stopPropagation()}};var j,l=function(u){if(u.keyCode===27){p.close()}},r=function(){if(j){clearTimeout(j);j=h}};var p={open:function(){var A=new q(),z=A.getOptions(arguments[0]||{}),M=q.event,C=b.clientWidth,y=b.clientHeight,G=this,N,w,I,v;r();if(z.overlay){N=e.getElementById("overlay");if(!N){N=A.createOverlay();o.appendChild(N);if(n){A.appendIframe(N)}}N.style.display="block"}if(n){A.setBodyBg()}w=e.getElementById("easyDialogBox");if(!w){w=A.createDialogBox();o.appendChild(w)}if(z.follow){var u=function(){A.setFollow(w,z.follow,z.followX,z.followY)};u();M.bind(f,"resize",u);q.data("follow",u);if(N){N.style.display="none"}z.fixed=false}else{A.setPosition(w,z.fixed)}w.style.display="block";I=typeof z.container==="string"?e.getElementById(z.container):A.createDialogWrap(z.container);v=w.getElementsByTagName("*")[0];if(!v){w.appendChild(I)}else{if(v&&I!==v){v.style.display="none";o.appendChild(v);w.appendChild(I)}}if(typeof z.success==="function"){z.success.call(p)}if(n||m){e.getElementById("easyDialogTitle").style.display="none";I.style.display="block";var P=e.getElementById("easyDialog_text").offsetWidth;e.getElementById("easyDialogTitle").style.width=P+"px";e.getElementById("easyDialogTitle").style.display="block"}else{I.style.display="block"}var B=I.offsetWidth,E=I.offsetHeight,x=B>C,J=E>y;I.style.marginTop=I.style.marginRight=I.style.marginBottom=I.style.marginLeft="0px";if(!z.follow){w.style.marginLeft="-"+(x?C/2:B/2)+"px";w.style.marginTop="-"+(J?y/2:E/2)+"px"}else{w.style.marginLeft=w.style.marginTop="0px"}if(n&&!z.overlay||m){w.style.width=B+"px";w.style.height=E+"px"}var L=e.getElementById("closeBtn"),D=e.getElementById("easyDialogTitle"),K=e.getElementById("easyDialogYesBtn"),F=e.getElementById("easyDialogNoBtn");if(K){M.bind(K,"click",function(Q){if(z.container.yesFn.call(G,Q)!==false){G.close()}})}if(F){var H=function(Q){if(z.container.noFn===true||z.container.noFn.call(G,Q)!==false){G.close()}};M.bind(F,"click",H);if(L){M.bind(L,"click",H)}}else{if(L){M.bind(L,"click",G.close)}}if(!z.lock){M.bind(e,"keyup",l)}if(z.autoClose&&typeof z.autoClose==="number"){j=setTimeout(G.close,z.autoClose)}if(z.drag&&D&&!x&&!J){D.style.cursor="move";q.drag(D,w)}if(!z.follow&&!z.fixed){var O=function(){A.setPosition(w,false)};if(!x&&!J){M.bind(f,"resize",O)}q.data("resize",O)}q.data("dialogElements",{overlay:N,dialogBox:w,closeBtn:L,dialogTitle:D,dialogYesBtn:K,dialogNoBtn:F})},close:function(){var u=q.data("options"),w=q.data("dialogElements"),v=q.event;r();if(u.overlay&&w.overlay){w.overlay.style.display="none"}w.dialogBox.style.display="none";if(n){w.dialogBox.style.removeExpression("top")}if(w.closeBtn){v.unbind(w.closeBtn,"click")}if(w.dialogTitle){v.unbind(w.dialogTitle,"mousedown")}if(w.dialogYesBtn){v.unbind(w.dialogYesBtn,"click")}if(w.dialogNoBtn){v.unbind(w.dialogNoBtn,"click")}if(!u.follow&&!u.fixed){v.unbind(f,"resize",q.data("resize"));q.removeData("resize")}if(u.follow){v.unbind(f,"resize",q.data("follow"));q.removeData("follow")}if(!u.lock){v.unbind(e,"keyup",l)}if(typeof u.callback==="function"){u.callback.call(p)}q.removeData("options");q.removeData("dialogElements")}};return p};var d=function(){c.easyDialog=g()},a=function(){if(e.body){return}try{b.doScroll("left")}catch(i){setTimeout(a,1);return}d()};(function(){if(e.body){d()}else{if(e.addEventListener){e.addEventListener("DOMContentLoaded",function(){e.removeEventListener("DOMContentLoaded",arguments.callee,false);d()},false);f.addEventListener("load",d,false)}else{if(e.attachEvent){e.attachEvent("onreadystatechange",function(){if(e.readyState==="complete"){e.detachEvent("onreadystatechange",arguments.callee);d()}});f.attachEvent("onload",d);var i=false;try{i=f.frameElement==null}catch(j){}if(b.doScroll&&i){a()}}}}})()})(window,undefined,window.ECar||(window.ECar={}));