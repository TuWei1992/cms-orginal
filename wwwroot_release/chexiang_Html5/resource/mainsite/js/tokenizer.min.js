(function(a,b){if(typeof define==="function"&&define.amd){define(["exports"],b)}else{if(typeof exports!=="undefined"){b(exports)}else{b(a)}}}(this,function(O){var H=function(S,U,T){return S>=U&&S<=T};function t(S){return H(S,48,57)}function F(S){return t(S)||H(S,65,70)||H(S,97,102)}function n(S){return H(S,65,90)}function P(S){return H(S,97,122)}function i(S){return n(S)||P(S)}function x(S){return S>=160}function g(S){return i(S)||x(S)||S==95}function l(S){return g(S)||t(S)||S==45}function I(S){return H(S,0,8)||H(S,14,31)||H(S,127,159)}function b(S){return S==10||S==12}function A(S){return b(S)||S==9||S==32}function a(S){return b(S)||isNaN(S)}var q=1114111;function e(ao,Y){if(Y==undefined){Y={transformFunctionWhitespace:false,scientificNotation:false}}var ap=-1;var al=[];var ab="data";var S;var aj;var af=0;var V=0;var ai=0;var aa=function(){af+=1;ai=V;V=0};var aq={line:af,column:V};var an=function(at){if(at===undefined){at=1}return ao.charCodeAt(ap+at)};var ad=function(at){if(at===undefined){at=1}ap+=at;S=ao.charCodeAt(ap);if(b(S)){aa()}else{V+=at}return true};var W=function(){ap-=1;if(b(S)){af-=1;V=ai}else{V-=1}aq.line=af;aq.column=V;return true};var ah=function(){return ap>=ao.length};var ag=function(){};var am=function(at){if(at){at.finish()}else{at=aj.finish()}if(Y.loc===true){at.loc={};at.loc.start={line:aq.line,column:aq.column};aq={line:af,column:V};at.loc.end=aq}al.push(at);aj=undefined;return true};var ae=function(at){aj=at;return true};var ak=function(){console.log("Parse error at index "+ap+", processing codepoint 0x"+S.toString(16)+" in state "+ab+".");return true};var ac=function(at){console.log("MAJOR SPEC ERROR: "+at);return true};var U=function(at){ab=at;return true};var T=function(){ad();if(F(S)){var av=[];for(var at=0;at<6;at++){if(F(S)){av.push(S);ad()}else{break}}var au=parseInt(av.map(String.fromCharCode).join(""),16);if(au>q){au=65533}if(!A(S)){W()}return au}else{return S}};for(;;){if(ap>ao.length*2){return"I'm infinite-looping!"}ad();switch(ab){case"data":if(A(S)){am(new Q);while(A(an())){ad()}}else{if(S==34){U("double-quote-string")}else{if(S==35){U("hash")}else{if(S==39){U("single-quote-string")}else{if(S==40){am(new y)}else{if(S==41){am(new B)}else{if(S==43){if(t(an())||(an()==46&&t(an(2)))){U("number")&&W()}else{am(new k(S))}}else{if(S==45){if(an(1)==45&&an(2)==62){ad(2)&&am(new d)}else{if(t(an())||(an(1)==46&&t(an(2)))){U("number")&&W()}else{U("ident")&&W()}}}else{if(S==46){if(t(an())){U("number")&&W()}else{am(new k(S))}}else{if(S==47){if(an()==42){ad()&&U("comment")}else{am(new k(S))}}else{if(S==58){am(new M)}else{if(S==59){am(new s)}else{if(S==60){if(an(1)==33&&an(2)==45&&an(3)==45){ad(3)&&am(new o)}else{am(new k(S))}}else{if(S==64){U("at-keyword")}else{if(S==91){am(new J)}else{if(S==92){if(a(an())){ak()&&am(new k(S))}else{U("ident")&&W()}}else{if(S==93){am(new f)}else{if(S==123){am(new c)}else{if(S==125){am(new h)}else{if(t(S)){U("number")&&W()}else{if(S==85||S==117){if(an(1)==43&&F(an(2))){ad()&&U("unicode-range")}else{U("ident")&&W()}}else{if(g(S)){U("ident")&&W()}else{if(ah()){am(new N);return al}else{am(new k(S))}}}}}}}}}}}}}}}}}}}}}}}break;case"double-quote-string":if(aj==undefined){ae(new E)}if(S==34){am()&&U("data")}else{if(ah()){ak()&&am()&&U("data")&&W()}else{if(b(S)){ak()&&am(new G)&&U("data")&&W()}else{if(S==92){if(a(an())){ak()&&am(new G)&&U("data")}else{if(b(an())){ad()}else{aj.append(T())}}}else{aj.append(S)}}}}break;case"single-quote-string":if(aj==undefined){ae(new E)}if(S==39){am()&&U("data")}else{if(ah()){ak()&&am()&&U("data")}else{if(b(S)){ak()&&am(new G)&&U("data")&&W()}else{if(S==92){if(a(an())){ak()&&am(new G)&&U("data")}else{if(b(an())){ad()}else{aj.append(T())}}}else{aj.append(S)}}}}break;case"hash":if(l(S)){ae(new r(S))&&U("hash-rest")}else{if(S==92){if(a(an())){ak()&&am(new k(35))&&U("data")&&W()}else{ae(new r(T()))&&U("hash-rest")}}else{am(new k(35))&&U("data")&&W()}}break;case"hash-rest":if(l(S)){aj.append(S)}else{if(S==92){if(a(an())){ak()&&am()&&U("data")&&W()}else{aj.append(T())}}else{am()&&U("data")&&W()}}break;case"comment":if(S==42){if(an()==47){ad()&&U("data")}else{ag()}}else{if(ah()){ak()&&U("data")&&W()}else{ag()}}break;case"at-keyword":if(S==45){if(g(an())){ae(new L(45))&&U("at-keyword-rest")}else{if(an(1)==92&&!a(an(2))){ae(new AtKeywordtoken(45))&&U("at-keyword-rest")}else{ak()&&am(new k(64))&&U("data")&&W()}}}else{if(g(S)){ae(new L(S))&&U("at-keyword-rest")}else{if(S==92){if(a(an())){ak()&&am(new k(35))&&U("data")&&W()}else{ae(new L(T()))&&U("at-keyword-rest")}}else{am(new k(64))&&U("data")&&W()}}}break;case"at-keyword-rest":if(l(S)){aj.append(S)}else{if(S==92){if(a(an())){ak()&&am()&&U("data")&&W()}else{aj.append(T())}}else{am()&&U("data")&&W()}}break;case"ident":if(S==45){if(g(an())){ae(new R(S))&&U("ident-rest")}else{if(an(1)==92&&!a(an(2))){ae(new R(S))&&U("ident-rest")}else{am(new k(45))&&U("data")}}}else{if(g(S)){ae(new R(S))&&U("ident-rest")}else{if(S==92){if(a(an())){ak()&&U("data")&&W()}else{ae(new R(T()))&&U("ident-rest")}}else{ac("Hit the generic 'else' clause in ident state.")&&U("data")&&W()}}}break;case"ident-rest":if(l(S)){aj.append(S)}else{if(S==92){if(a(an())){ak()&&am()&&U("data")&&W()}else{aj.append(T())}}else{if(S==40){if(aj.ASCIImatch("url")){U("url")}else{am(new w(aj))&&U("data")}}else{if(A(S)&&Y.transformFunctionWhitespace){U("transform-function-whitespace")&&W()}else{am()&&U("data")&&W()}}}}break;case"transform-function-whitespace":if(A(an())){ag()}else{if(S==40){am(new w(aj))&&U("data")}else{am()&&U("data")&&W()}}break;case"number":ae(new D());if(S==45){if(t(an())){ad()&&aj.append([45,S])&&U("number-rest")}else{if(an(1)==46&&t(an(2))){ad(2)&&aj.append([45,46,S])&&U("number-fraction")}else{U("data")&&W()}}}else{if(S==43){if(t(an())){ad()&&aj.append([43,S])&&U("number-rest")}else{if(an(1)==46&&t(an(2))){ad(2)&&aj.append([43,46,S])&&U("number-fraction")}else{U("data")&&W()}}}else{if(t(S)){aj.append(S)&&U("number-rest")}else{if(S==46){if(t(an())){ad()&&aj.append([46,S])&&U("number-fraction")}else{U("data")&&W()}}else{U("data")&&W()}}}}break;case"number-rest":if(t(S)){aj.append(S)}else{if(S==46){if(t(an())){ad()&&aj.append([46,S])&&U("number-fraction")}else{am()&&U("data")&&W()}}else{if(S==37){am(new p(aj))&&U("data")}else{if(S==69||S==101){if(t(an())){ad()&&aj.append([37,S])&&U("sci-notation")}else{if((an(1)==43||an(1)==45)&&t(an(2))){aj.append([37,an(1),an(2)])&&ad(2)&&U("sci-notation")}else{ae(new m(aj,S))&&U("dimension")}}}else{if(S==45){if(g(an())){ad()&&ae(new m(aj,[45,S]))&&U("dimension")}else{if(an(1)==92&&a(an(2))){ak()&&am()&&U("data")&&W()}else{if(an(1)==92){ad()&&ae(new m(aj,[45,T()]))&&U("dimension")}else{am()&&U("data")&&W()}}}}else{if(g(S)){ae(new m(aj,S))&&U("dimension")}else{if(S==92){if(a(an)){ak()&&am()&&U("data")&&W()}else{ae(new m(aj,T))&&U("dimension")}}else{am()&&U("data")&&W()}}}}}}}break;case"number-fraction":aj.type="number";if(t(S)){aj.append(S)}else{if(S==37){am(new p(aj))&&U("data")}else{if(S==69||S==101){if(t(an())){ad()&&aj.append([101,S])&&U("sci-notation")}else{if((an(1)==43||an(1)==45)&&t(an(2))){aj.append([101,an(1),an(2)])&&ad(2)&&U("sci-notation")}else{ae(new m(aj,S))&&U("dimension")}}}else{if(S==45){if(g(an())){ad()&&ae(new m(aj,[45,S]))&&U("dimension")}else{if(an(1)==92&&a(an(2))){ak()&&am()&&U("data")&&W()}else{if(an(1)==92){ad()&&ae(new m(aj,[45,T()]))&&U("dimension")}else{am()&&U("data")&&W()}}}}else{if(g(S)){ae(new m(aj,S))&&U("dimension")}else{if(S==92){if(a(an)){ak()&&am()&&U("data")&&W()}else{ae(new m(aj,T()))&&U("dimension")}}else{am()&&U("data")&&W()}}}}}}break;case"dimension":if(l(S)){aj.append(S)}else{if(S==92){if(a(an())){ak()&&am()&&U("data")&&W()}else{aj.append(T())}}else{am()&&U("data")&&W()}}break;case"sci-notation":aj.type="number";if(t(S)){aj.append(S)}else{am()&&U("data")&&W()}break;case"url":if(ah()){ak()&&am(new K)&&U("data")}else{if(S==34){U("url-double-quote")}else{if(S==39){U("url-single-quote")}else{if(S==41){am(new j)&&U("data")}else{if(A(S)){ag()}else{U("url-unquoted")&&W()}}}}}break;case"url-double-quote":if(!(aj instanceof j)){ae(new j)}if(ah()){ak()&&am(new K)&&U("data")}else{if(S==34){U("url-end")}else{if(b(S)){ak()&&U("bad-url")}else{if(S==92){if(b(an())){ad()}else{if(a(an())){ak()&&am(new K)&&U("data")&&W()}else{aj.append(T())}}}else{aj.append(S)}}}}break;case"url-single-quote":if(!(aj instanceof j)){ae(new j)}if(ah()){ak()&&am(new K)&&U("data")}else{if(S==39){U("url-end")}else{if(b(S)){ak()&&U("bad-url")}else{if(S==92){if(b(an())){ad()}else{if(a(an())){ak()&&am(new K)&&U("data")&&W()}else{aj.append(T())}}}else{aj.append(S)}}}}break;case"url-end":if(ah()){ak()&&am(new K)&&U("data")}else{if(A(S)){ag()}else{if(S==41){am()&&U("data")}else{ak()&&U("bad-url")&&W()}}}break;case"url-unquoted":if(!(aj instanceof j)){ae(new j)}if(ah()){ak()&&am(new K)&&U("data")}else{if(A(S)){U("url-end")}else{if(S==41){am()&&U("data")}else{if(S==34||S==39||S==40||I(S)){ak()&&U("bad-url")}else{if(S==92){if(a(an())){ak()&&U("bad-url")}else{aj.append(T())}}else{aj.append(S)}}}}}break;case"bad-url":if(ah()){ak()&&am(new K)&&U("data")}else{if(S==41){am(new K)&&U("data")}else{if(S==92){if(a(an())){ag()}else{T()}}else{ag()}}}break;case"unicode-range":var Z=[S],X=[S];for(var ar=1;ar<6;ar++){if(F(an())){ad();Z.push(S);X.push(S)}else{break}}if(an()==63){for(;ar<6;ar++){if(an()==63){ad();Z.push("0".charCodeAt(0));X.push("f".charCodeAt(0))}else{break}}am(new u(Z,X))&&U("data")}else{if(an(1)==45&&F(an(2))){ad();ad();X=[S];for(var ar=1;ar<6;ar++){if(F(an())){ad();X.push(S)}else{break}}am(new u(Z,X))&&U("data")}else{am(new u(Z))&&U("data")}}break;default:ac("Unknown state '"+ab+"'")}}}function v(S){return String.fromCharCode.apply(null,S.filter(function(T){return T}))}function z(S){return this}z.prototype.finish=function(){return this};z.prototype.toString=function(){return this.tokenType};z.prototype.toSourceString=z.prototype.toString;z.prototype.toJSON=function(){return this.toString()};function G(){return this}G.prototype=new z;G.prototype.tokenType="BADSTRING";function K(){return this}K.prototype=new z;K.prototype.tokenType="BADURL";function Q(){return this}Q.prototype=new z;Q.prototype.tokenType="WHITESPACE";Q.prototype.toString=function(){return"WS"};Q.prototype.toSourceString=function(){return" "};function o(){return this}o.prototype=new z;o.prototype.tokenType="CDO";function d(){return this}d.prototype=new z;d.prototype.tokenType="CDC";function M(){return this}M.prototype=new z;M.prototype.tokenType=":";function s(){return this}s.prototype=new z;s.prototype.tokenType=";";function c(){return this}c.prototype=new z;c.prototype.tokenType="{";function h(){return this}h.prototype=new z;h.prototype.tokenType="}";function J(){return this}J.prototype=new z;J.prototype.tokenType="[";function f(){return this}f.prototype=new z;f.prototype.tokenType="]";function y(){return this}y.prototype=new z;y.prototype.tokenType="(";function B(){return this}B.prototype=new z;B.prototype.tokenType=")";function N(){return this}N.prototype=new z;N.prototype.tokenType="EOF";function k(S){this.value=String.fromCharCode(S);return this}k.prototype=new z;k.prototype.tokenType="DELIM";k.prototype.toString=function(){return"DELIM("+this.value+")"};k.prototype.toSourceString=function(){return this.value};function C(){return this}C.prototype=new z;C.prototype.append=function(T){if(T instanceof Array){for(var S=0;S<T.length;S++){this.value.push(T[S])}}else{this.value.push(T)}return true};C.prototype.finish=function(){this.value=this.valueAsString();return this};C.prototype.ASCIImatch=function(S){return this.valueAsString().toLowerCase()==S.toLowerCase()};C.prototype.valueAsString=function(){if(typeof this.value=="string"){return this.value}return v(this.value)};C.prototype.valueAsCodes=function(){if(typeof this.value=="string"){var S=[];for(var T=0;T<this.value.length;T++){S.push(this.value.charCodeAt(T))}return S}return this.value.filter(function(U){return U})};function R(S){this.value=[];this.append(S)}R.prototype=new C;R.prototype.tokenType="IDENT";R.prototype.toString=function(){return"IDENT("+this.value+")"};R.prototype.toSourceString=function(){return this.value};function w(S){this.value=S.finish().value}w.prototype=new C;w.prototype.tokenType="FUNCTION";w.prototype.toString=function(){return"FUNCTION("+this.value+")"};w.prototype.toSourceString=function(){return this.value};function L(S){this.value=[];this.append(S)}L.prototype=new C;L.prototype.tokenType="AT-KEYWORD";L.prototype.toString=function(){return"AT("+this.value+")"};L.prototype.toSourceString=function(){return"@"+this.value};function r(S){this.value=[];this.append(S)}r.prototype=new C;r.prototype.tokenType="HASH";r.prototype.toString=function(){return"HASH("+this.value+")"};r.prototype.toSourceString=function(){return"#"+this.value};function E(S){this.value=[];this.append(S)}E.prototype=new C;E.prototype.tokenType="STRING";E.prototype.toString=function(){return'"'+this.value+'"'};E.prototype.toSourceString=E.prototype.toString;function j(S){this.value=[];this.append(S)}j.prototype=new C;j.prototype.tokenType="URL";j.prototype.toString=function(){return"URL("+this.value+")"};j.prototype.toSourceString=function(){return"url('"+this.value+"')"};function D(S){this.value=[];this.append(S);this.type="integer"}D.prototype=new C;D.prototype.tokenType="NUMBER";D.prototype.toString=function(){if(this.type=="integer"){return"INT("+this.value+")"}return"NUMBER("+this.value+")"};D.prototype.toSourceString=function(){if(this.type=="integer"){return this.value}return this.value};D.prototype.finish=function(){this.repr=this.valueAsString();this.value=this.repr*1;if(Math.abs(this.value)%1!=0){this.type="number"}return this};function p(S){S.finish();this.value=S.value;this.repr=S.repr}p.prototype=new z;p.prototype.tokenType="PERCENTAGE";p.prototype.toString=function(){return"PERCENTAGE("+this.value+")"};p.prototype.toSourceString=function(){return this.value+"%"};function m(T,S){T.finish();this.num=T.value;this.unit=[];this.repr=T.repr;this.append(S)}m.prototype=new z;m.prototype.tokenType="DIMENSION";m.prototype.toString=function(){return"DIM("+this.num+","+this.unit+")"};m.prototype.toSourceString=function(){return this.num+this.unit};m.prototype.append=function(T){if(T instanceof Array){for(var S=0;S<T.length;S++){this.unit.push(T[S])}}else{this.unit.push(T)}return true};m.prototype.finish=function(){this.unit=v(this.unit);this.repr+=this.unit;return this};function u(T,S){T=parseInt(v(T),16);if(S===undefined){S=T+1}else{S=parseInt(v(S),16)}if(T>q){S=T}if(S<T){S=T}if(S>q){S=q}this.start=T;this.end=S;return this}u.prototype=new z;u.prototype.tokenType="UNICODE-RANGE";u.prototype.toString=function(){if(this.start+1==this.end){return"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+")"}if(this.start<this.end){return"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+"-"+this.end.toString(16).toUpperCase()+")"}return"UNICODE-RANGE()"};u.prototype.toSourceString=function(){if(this.start+1==this.end){return"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+")"}if(this.start<this.end){return"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+"-"+this.end.toString(16).toUpperCase()+")"}return"UNICODE-RANGE()"};u.prototype.contains=function(S){return S>=this.start&&S<this.end};O.tokenize=e}));